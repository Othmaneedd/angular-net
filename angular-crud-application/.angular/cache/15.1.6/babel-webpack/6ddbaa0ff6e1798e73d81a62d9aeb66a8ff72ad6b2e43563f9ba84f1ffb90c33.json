{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../service/crud.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/router\";\nfunction UsersListComponent_span_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.sortDirection === \"asc\" ? \"\\u2191\" : \"\\u2193\", \" \");\n  }\n}\nfunction UsersListComponent_span_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.sortDirection === \"asc\" ? \"\\u2191\" : \"\\u2193\", \" \");\n  }\n}\nfunction UsersListComponent_span_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.sortDirection === \"asc\" ? \"\\u2191\" : \"\\u2193\", \" \");\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/edit-user\", a1];\n};\nconst _c1 = function (a1) {\n  return [\"/user\", a1];\n};\nfunction UsersListComponent_tr_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 12)(10, \"button\", 15);\n    i0.ɵɵtext(11, \" \\u270F\\uFE0F Modifier \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function UsersListComponent_tr_27_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const user_r5 = restoredCtx.$implicit;\n      const i_r6 = restoredCtx.index;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.delete(user_r5.id, i_r6));\n    });\n    i0.ɵɵtext(13, \" \\uD83D\\uDDD1\\uFE0F Supprimer \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 17);\n    i0.ɵɵtext(15, \" \\uD83D\\uDC41\\uFE0F D\\u00E9tails \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const user_r5 = ctx.$implicit;\n    const i_r6 = ctx.index;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate((ctx_r3.currentPage - 1) * ctx_r3.itemsPerPage + i_r6 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r5.firstName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r5.lastName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r5.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(6, _c0, user_r5.id));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(8, _c1, user_r5.id));\n  }\n}\nfunction UsersListComponent_nav_28_li_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 20)(1, \"a\", 21);\n    i0.ɵɵlistener(\"click\", function UsersListComponent_nav_28_li_8_Template_a_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const i_r11 = restoredCtx.index;\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r12.changePage(i_r11 + 1));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const i_r11 = ctx.index;\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active\", ctx_r9.currentPage === i_r11 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i_r11 + 1, \" \");\n  }\n}\nconst _c2 = function () {\n  return [];\n};\nfunction UsersListComponent_nav_28_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"nav\", 18)(1, \"ul\", 19)(2, \"li\", 20)(3, \"a\", 21);\n    i0.ɵɵlistener(\"click\", function UsersListComponent_nav_28_Template_a_click_3_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.changePage(1));\n    });\n    i0.ɵɵtext(4, \"\\u00AB\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"li\", 20)(6, \"a\", 21);\n    i0.ɵɵlistener(\"click\", function UsersListComponent_nav_28_Template_a_click_6_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.changePage(ctx_r16.currentPage - 1));\n    });\n    i0.ɵɵtext(7, \"\\u2039\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(8, UsersListComponent_nav_28_li_8_Template, 3, 3, \"li\", 22);\n    i0.ɵɵelementStart(9, \"li\", 20)(10, \"a\", 21);\n    i0.ɵɵlistener(\"click\", function UsersListComponent_nav_28_Template_a_click_10_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.changePage(ctx_r17.currentPage + 1));\n    });\n    i0.ɵɵtext(11, \"\\u203A\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"li\", 20)(13, \"a\", 21);\n    i0.ɵɵlistener(\"click\", function UsersListComponent_nav_28_Template_a_click_13_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.changePage(ctx_r18.totalPages));\n    });\n    i0.ɵɵtext(14, \"\\u00BB\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"disabled\", ctx_r4.currentPage === 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassProp(\"disabled\", ctx_r4.currentPage === 1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(9, _c2).constructor(ctx_r4.totalPages));\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"disabled\", ctx_r4.currentPage === ctx_r4.totalPages);\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassProp(\"disabled\", ctx_r4.currentPage === ctx_r4.totalPages);\n  }\n}\nexport class UsersListComponent {\n  constructor(crudService) {\n    this.crudService = crudService;\n    this.Users = [];\n    this.searchText = '';\n    this.sortColumn = '';\n    this.sortDirection = 'asc';\n    // Pagination\n    this.currentPage = 1;\n    this.itemsPerPage = 10;\n  }\n  ngOnInit() {\n    this.crudService.GetUsers().subscribe(res => {\n      this.Users = res;\n    });\n  }\n  delete(id, i) {\n    if (window.confirm('Do you want to go ahead?')) {\n      this.crudService.deleteUser(id).subscribe(() => {\n        this.Users.splice(i, 1);\n      });\n    }\n  }\n  sortBy(column) {\n    if (this.sortColumn === column) {\n      this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';\n    } else {\n      this.sortColumn = column;\n      this.sortDirection = 'asc';\n    }\n  }\n  get paginatedUsers() {\n    let filtered = this.Users.filter(user => Object.values(user).join(' ').toLowerCase().includes(this.searchText.toLowerCase()));\n    if (this.sortColumn) {\n      filtered = filtered.sort((a, b) => {\n        const aVal = a[this.sortColumn]?.toString().toLowerCase();\n        const bVal = b[this.sortColumn]?.toString().toLowerCase();\n        return this.sortDirection === 'asc' ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);\n      });\n    }\n    const start = (this.currentPage - 1) * this.itemsPerPage;\n    return filtered.slice(start, start + this.itemsPerPage);\n  }\n  get totalPages() {\n    const filteredLength = this.Users.filter(user => Object.values(user).join(' ').toLowerCase().includes(this.searchText.toLowerCase())).length;\n    return Math.ceil(filteredLength / this.itemsPerPage);\n  }\n  changePage(page) {\n    if (page >= 1 && page <= this.totalPages) {\n      this.currentPage = page;\n    }\n  }\n}\nUsersListComponent.ɵfac = function UsersListComponent_Factory(t) {\n  return new (t || UsersListComponent)(i0.ɵɵdirectiveInject(i1.CrudService));\n};\nUsersListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: UsersListComponent,\n  selectors: [[\"app-users-list\"]],\n  decls: 29,\n  vars: 6,\n  consts: [[1, \"container-fluid\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-3\"], [1, \"mb-0\"], [1, \"btn\", \"btn-success\"], [1, \"bi\", \"bi-plus-lg\"], [1, \"mb-3\"], [\"type\", \"text\", \"placeholder\", \"\\uD83D\\uDD0D Rechercher un utilisateur...\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [1, \"table-responsive\"], [1, \"table\", \"table-striped\", \"table-hover\", \"align-middle\"], [1, \"table-light\"], [2, \"cursor\", \"pointer\", 3, \"click\"], [4, \"ngIf\"], [1, \"text-center\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"mt-4\", 4, \"ngIf\"], [1, \"btn\", \"btn-sm\", \"btn-primary\", \"me-1\", 3, \"routerLink\"], [1, \"btn\", \"btn-sm\", \"btn-danger\", \"me-1\", 3, \"click\"], [1, \"btn\", \"btn-sm\", \"btn-secondary\", 3, \"routerLink\"], [1, \"mt-4\"], [1, \"pagination\", \"justify-content-center\", \"gap-2\"], [1, \"page-item\"], [1, \"page-link\", 3, \"click\"], [\"class\", \"page-item\", 3, \"active\", 4, \"ngFor\", \"ngForOf\"]],\n  template: function UsersListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h3\", 2);\n      i0.ɵɵtext(3, \"\\uD83D\\uDC65 Utilisateurs\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"button\", 3);\n      i0.ɵɵelement(5, \"i\", 4);\n      i0.ɵɵtext(6, \" Nouvel utilisateur \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"div\", 5)(8, \"input\", 6);\n      i0.ɵɵlistener(\"ngModelChange\", function UsersListComponent_Template_input_ngModelChange_8_listener($event) {\n        return ctx.searchText = $event;\n      })(\"input\", function UsersListComponent_Template_input_input_8_listener() {\n        return ctx.currentPage = 1;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(9, \"div\", 7)(10, \"table\", 8)(11, \"thead\", 9)(12, \"tr\")(13, \"th\");\n      i0.ɵɵtext(14, \"#\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"th\", 10);\n      i0.ɵɵlistener(\"click\", function UsersListComponent_Template_th_click_15_listener() {\n        return ctx.sortBy(\"firstName\");\n      });\n      i0.ɵɵtext(16, \" Pr\\u00E9nom \");\n      i0.ɵɵtemplate(17, UsersListComponent_span_17_Template, 2, 1, \"span\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"th\", 10);\n      i0.ɵɵlistener(\"click\", function UsersListComponent_Template_th_click_18_listener() {\n        return ctx.sortBy(\"lastName\");\n      });\n      i0.ɵɵtext(19, \" Nom \");\n      i0.ɵɵtemplate(20, UsersListComponent_span_20_Template, 2, 1, \"span\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"th\", 10);\n      i0.ɵɵlistener(\"click\", function UsersListComponent_Template_th_click_21_listener() {\n        return ctx.sortBy(\"email\");\n      });\n      i0.ɵɵtext(22, \" Email \");\n      i0.ɵɵtemplate(23, UsersListComponent_span_23_Template, 2, 1, \"span\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(24, \"th\", 12);\n      i0.ɵɵtext(25, \"Actions\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(26, \"tbody\");\n      i0.ɵɵtemplate(27, UsersListComponent_tr_27_Template, 16, 10, \"tr\", 13);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(28, UsersListComponent_nav_28_Template, 15, 10, \"nav\", 14);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngModel\", ctx.searchText);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngIf\", ctx.sortColumn === \"firstName\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.sortColumn === \"lastName\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.sortColumn === \"email\");\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.paginatedUsers);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.totalPages > 1);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i4.RouterLink],\n  styles: [\"table[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n}\\ntable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\\n  -webkit-user-select: none;\\n          user-select: none;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy91c2Vycy1saXN0L3VzZXJzLWxpc3QuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxlQUFBO0FBQ0Y7QUFBRTtFQUNFLHlCQUFBO1VBQUEsaUJBQUE7QUFFSiIsInNvdXJjZXNDb250ZW50IjpbInRhYmxlIHtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgdGgge1xyXG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","UsersListComponent","constructor","crudService","ngOnInit","GetUsers","subscribe","res","Users","delete","id","i","window","confirm","deleteUser","splice","sortBy","column","sortColumn","sortDirection","paginatedUsers","filtered","filter","user","Object","values","join","toLowerCase","includes","searchText","sort","a","b","aVal","toString","bVal","localeCompare","start","currentPage","itemsPerPage","slice","totalPages","filteredLength","length","Math","ceil","changePage","page","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\DELL\\dotnet-sqlserver-angular15-crud\\angular-crud-application\\src\\app\\components\\users-list\\users-list.component.html","C:\\Users\\DELL\\dotnet-sqlserver-angular15-crud\\angular-crud-application\\src\\app\\components\\users-list\\users-list.component.ts"],"sourcesContent":["<div class=\"container-fluid\">\r\n  <div class=\"d-flex justify-content-between align-items-center mb-3\">\r\n    <h3 class=\"mb-0\">👥 Utilisateurs</h3>\r\n    <button class=\"btn btn-success\">\r\n      <i class=\"bi bi-plus-lg\"></i> Nouvel utilisateur\r\n    </button>\r\n  </div>\r\n\r\n  <!-- Barre de recherche -->\r\n  <div class=\"mb-3\">\r\n    <input\r\n      type=\"text\"\r\n      class=\"form-control\"\r\n      placeholder=\"🔍 Rechercher un utilisateur...\"\r\n      [(ngModel)]=\"searchText\"\r\n      (input)=\"currentPage = 1\"\r\n    />\r\n  </div>\r\n\r\n  <!-- Tableau des utilisateurs -->\r\n  <div class=\"table-responsive\">\r\n    <table class=\"table table-striped table-hover align-middle\">\r\n      <thead class=\"table-light\">\r\n        <tr>\r\n          <th>#</th>\r\n          <th (click)=\"sortBy('firstName')\" style=\"cursor: pointer;\">\r\n            Prénom\r\n            <span *ngIf=\"sortColumn === 'firstName'\">\r\n              {{ sortDirection === 'asc' ? '↑' : '↓' }}\r\n            </span>\r\n          </th>\r\n          <th (click)=\"sortBy('lastName')\" style=\"cursor: pointer;\">\r\n            Nom\r\n            <span *ngIf=\"sortColumn === 'lastName'\">\r\n              {{ sortDirection === 'asc' ? '↑' : '↓' }}\r\n            </span>\r\n          </th>\r\n          <th (click)=\"sortBy('email')\" style=\"cursor: pointer;\">\r\n            Email\r\n            <span *ngIf=\"sortColumn === 'email'\">\r\n              {{ sortDirection === 'asc' ? '↑' : '↓' }}\r\n            </span>\r\n          </th>\r\n          <th class=\"text-center\">Actions</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr *ngFor=\"let user of paginatedUsers; let i = index\">\r\n          <td>{{ (currentPage - 1) * itemsPerPage + i + 1 }}</td>\r\n          <td>{{ user.firstName }}</td>\r\n          <td>{{ user.lastName }}</td>\r\n          <td>{{ user.email }}</td>\r\n          <td class=\"text-center\">\r\n            <button class=\"btn btn-sm btn-primary me-1\" [routerLink]=\"['/edit-user', user.id]\">\r\n              ✏️ Modifier\r\n            </button>\r\n            <button class=\"btn btn-sm btn-danger me-1\" (click)=\"delete(user.id, i)\">\r\n              🗑️ Supprimer\r\n            </button>\r\n            <button class=\"btn btn-sm btn-secondary\" [routerLink]=\"['/user', user.id]\">\r\n              👁️ Détails\r\n            </button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n\r\n  <!-- Pagination -->\r\n  <nav *ngIf=\"totalPages > 1\" class=\"mt-4\">\r\n    <ul class=\"pagination justify-content-center gap-2\">\r\n      <li class=\"page-item\" [class.disabled]=\"currentPage === 1\">\r\n        <a class=\"page-link\" (click)=\"changePage(1)\">«</a>\r\n      </li>\r\n      <li class=\"page-item\" [class.disabled]=\"currentPage === 1\">\r\n        <a class=\"page-link\" (click)=\"changePage(currentPage - 1)\">‹</a>\r\n      </li>\r\n\r\n      <li\r\n        class=\"page-item\"\r\n        *ngFor=\"let page of [].constructor(totalPages); let i = index\"\r\n        [class.active]=\"currentPage === i + 1\"\r\n      >\r\n        <a class=\"page-link\" (click)=\"changePage(i + 1)\">\r\n          {{ i + 1 }}\r\n        </a>\r\n      </li>\r\n\r\n      <li class=\"page-item\" [class.disabled]=\"currentPage === totalPages\">\r\n        <a class=\"page-link\" (click)=\"changePage(currentPage + 1)\">›</a>\r\n      </li>\r\n      <li class=\"page-item\" [class.disabled]=\"currentPage === totalPages\">\r\n        <a class=\"page-link\" (click)=\"changePage(totalPages)\">»</a>\r\n      </li>\r\n    </ul>\r\n  </nav>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { CrudService } from '../../service/crud.service';\r\n\r\n@Component({\r\n  selector: 'app-users-list',\r\n  templateUrl: './users-list.component.html',\r\n  styleUrls: ['./users-list.component.scss']\r\n})\r\nexport class UsersListComponent implements OnInit {\r\n  Users: any[] = [];\r\n  searchText = '';\r\n  sortColumn = '';\r\n  sortDirection: 'asc' | 'desc' = 'asc';\r\n\r\n  // Pagination\r\n  currentPage = 1;\r\n  itemsPerPage = 10;\r\n\r\n  constructor(private crudService: CrudService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.crudService.GetUsers().subscribe((res: any) => {\r\n      this.Users = res;\r\n    });\r\n  }\r\n\r\n  delete(id: any, i: any) {\r\n    if (window.confirm('Do you want to go ahead?')) {\r\n      this.crudService.deleteUser(id).subscribe(() => {\r\n        this.Users.splice(i, 1);\r\n      });\r\n    }\r\n  }\r\n\r\n  sortBy(column: string) {\r\n    if (this.sortColumn === column) {\r\n      this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';\r\n    } else {\r\n      this.sortColumn = column;\r\n      this.sortDirection = 'asc';\r\n    }\r\n  }\r\n\r\n  get paginatedUsers() {\r\n    let filtered = this.Users\r\n      .filter(user =>\r\n        Object.values(user)\r\n          .join(' ')\r\n          .toLowerCase()\r\n          .includes(this.searchText.toLowerCase())\r\n      );\r\n\r\n    if (this.sortColumn) {\r\n      filtered = filtered.sort((a, b) => {\r\n        const aVal = a[this.sortColumn]?.toString().toLowerCase();\r\n        const bVal = b[this.sortColumn]?.toString().toLowerCase();\r\n        return this.sortDirection === 'asc'\r\n          ? aVal.localeCompare(bVal)\r\n          : bVal.localeCompare(aVal);\r\n      });\r\n    }\r\n\r\n    const start = (this.currentPage - 1) * this.itemsPerPage;\r\n    return filtered.slice(start, start + this.itemsPerPage);\r\n  }\r\n\r\n  get totalPages() {\r\n    const filteredLength = this.Users.filter(user =>\r\n      Object.values(user)\r\n        .join(' ')\r\n        .toLowerCase()\r\n        .includes(this.searchText.toLowerCase())\r\n    ).length;\r\n    return Math.ceil(filteredLength / this.itemsPerPage);\r\n  }\r\n\r\n  changePage(page: number) {\r\n    if (page >= 1 && page <= this.totalPages) {\r\n      this.currentPage = page;\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}